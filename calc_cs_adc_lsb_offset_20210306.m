clear; close all; clc

y1 = [-90.539, -70.481, -50.301, -30.507, -10.485, 9.752, 29.835, 49.711, 69.908, 89.880];
x1 = [-92.923, -72.846, -52.806, -32.693, -12.616, 7.516, 27.630, 47.725, 67.829, 87.925];
m = size(x1);
n = 1:m(2);

% y = [-50.301, -30.507, -10.485, 9.752, 29.835, 49.711];
% x = [-52.806, -32.693, -12.616, 7.516, 27.630, 47.725];

%y = y1;
%x = x1;

% y = [-90.539, -30.507,  29.835, 89.880];
% x = [-92.923, -32.693,  27.630, 87.925];

% y = [-90.539, 89.880];
% x = [-92.923, 87.925];

% y = [-10.485, 9.752];
% x = [-12.616, 7.516];

%y = [-30.507, -10.485, 9.752, 29.835];
%x = [-32.693, -12.616, 7.516, 27.630];
%y = [-30.4093	-10.2089	10.2106	30.4068];
%x = [-32.967	-12.671	7.8458	28.142];

y = [-0.030352 0.029603];
x = [-0.032757 0.027502];

x2 = x .* 20;
y2 = y .* 20;

p = polyfit(x2, y2, 1);
a = x2 .* p(1) + p(2);
%a = x + p(2);
b = (y2 - a);

plot(y, b);
grid on

gain=183.105;
lsb = gain * p(1);
offset = p(2)*1000;

CFRG3B4 = round((lsb - gain) / 0.045);
CFRG3B5 = round(offset / 1.46485);

if (CFRG3B4 < 0)
    CFRG3B4 = 128 + abs(CFRG3B4);
end
if (CFRG3B5 < 0)
    CFRG3B5 = 256 + CFRG3B5;
end
%CFRG3B4=dec2hex(CFRG3B4)
%CFRG3B5=dec2hex(CFRG3B5)
CFRG3B4
CFRG3B5